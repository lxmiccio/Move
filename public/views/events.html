<!-- Flawless -->

<div class="row" ng-if="ctrl.category.id == index.user.category.id || index.user.id == 1">
  <div class="col-xs-12">
    <div class="row">
      <div class="col-md-10 col-md-offset-1 col-sm-12 col-sm-offset-0 col-xs-12 col-xs-offset-0">
        <div class="row">
          <div class="funkyradio">
            <div class="col-md-6 col-sm-6 col-xs-12">
              <div class="funkyradio-primary">
                <input type="radio" name="radio" id="radio1" ng-click="index.locate('categoria/' + ctrl.category.id)"/>
                <label for="radio1">Evento Corrente</label>
              </div>
            </div>

            <div class="col-md-6 col-sm-6 col-xs-12">
              <div class="funkyradio-primary">
                <input type="radio" name="radio" id="radio2" checked/>
                <label for="radio2">Eventi Trascorsi</label>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="row br-lg"></div>

    <div class="row">
      <div class="col-md-10 col-md-offset-1 col-xs-12" ng-repeat="event in ctrl.pagination.events">
        <div class="jumbotron well-sm">
          <div class="row">
            <div class="row br-lg"></div>

            <div class="col-md-5 col-md-offset-0 col-sm-5 col-sm-offset-0 col-xs-10 col-xs-offset-1">
              <img ng-src="{{event.image | decache}}" class="img-responsive img-rounded center-block"/>
            </div>

            <div class="col-md-7 col-sm-7 col-xs-12">
              <div class="row br-lg visible-xs"></div>

              <div class="row">
                <div class="col-xs-12">
                  <h2 class="text-center"><strong>{{event.name}}</strong></h2>
                </div>
              </div>

              <div class="row br-lg"></div>

              <div class="row">
                <div class="col-xs-12">
                  <p class="text-center" ng-bind-html="ctrl.event.description | json | newLine | parseUrl | removeEscape | dejson"></p>
                </div>
              </div>

              <div class="row br-lg"></div>

              <div class="row">
                <div class="col-xs-12">
                  <p class="text-center">Partecipanti: {{event.partecipants.length}}</p>
                </div>
              </div>

              <div class="row br-lg"></div>

              <div class="row">
                <div class="col-xs-12">
                  <div class="text-center">
                    <button type="button" class="btn btn-default" ng-click="ctrl.openPartecipantsPrsPdf(event)">Partecipante/Pr</button>
                    <button type="button" class="btn btn-default" ng-click="ctrl.openPartecipantsPdf(event)">Partecipanti</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="row br-lg"></div>
        </div>
      </div>
    </div>

    <div class="row br-lg"></div>

    <div class="row" ng-if="ctrl.category.oldEvents.length > 0">
      <div class="col-md-10 col-md-offset-1 col-xs-12">
        <div class="text-center">
          <ul class="pagination">
            <li ng-class="{disabled: ctrl.pagination.page == 1}">
              <a class="hidden-sm hidden-xs" ng-click="ctrl.locateToPage(1, ctrl.pagination.totalPages, 'categoria/' + ctrl.category.id + '/pagina/' + 1)">Inizio</a>
              <a class="visible-sm visible-xs" ng-click="ctrl.locateToPage(1, ctrl.pagination.totalPages, 'categoria/' + ctrl.category.id + '/pagina/' + 1)"><i class="fa fa-fast-backward" aria-hidden="true"></i></a>
            </li>

            <li ng-class="{disabled: ctrl.pagination.page == 1}">
              <a class="hidden-sm hidden-xs" ng-click="ctrl.locateToPage((ctrl.pagination.page - 1), ctrl.pagination.totalPages, 'categoria/' + ctrl.category.id + '/pagina/' + (ctrl.pagination.page - 1))">Precedente</a>
              <a class="visible-sm visible-xs" ng-click="ctrl.locateToPage((ctrl.pagination.page - 1), ctrl.pagination.totalPages, 'categoria/' + ctrl.category.id + '/pagina/' + (ctrl.pagination.page - 1))"><i class="fa fa-backward" aria-hidden="true"></i></a>
            </li>

            <li ng-repeat="page in ctrl.pagination.pages" ng-class="{active: ctrl.pagination.page == page}">
              <a ng-click="ctrl.locateToPage(page, ctrl.pagination.totalPages, 'categoria/' + ctrl.category.id + '/pagina/' + page)">{{page}}</a>
            </li>

            <li ng-class="{disabled: ctrl.pagination.page == ctrl.pagination.totalPages}">
              <a class="hidden-sm hidden-xs" ng-click="ctrl.locateToPage((ctrl.pagination.page - 1 + 2), ctrl.pagination.totalPages, 'categoria/' + ctrl.category.id + '/pagina/' + (ctrl.pagination.page - 1 + 2))">Successivo</a>
              <a class="visible-sm visible-xs" ng-click="ctrl.locateToPage((ctrl.pagination.page - 1 + 2), ctrl.pagination.totalPages, 'categoria/' + ctrl.category.id + '/pagina/' + (ctrl.pagination.page - 1 + 2))"><i class="fa fa-forward" aria-hidden="true"></i></a>
            </li>

            <li ng-class="{disabled: ctrl.pagination.page == ctrl.pagination.totalPages}">
              <a class="hidden-sm hidden-xs" ng-click="ctrl.locateToPage(ctrl.pagination.totalPages, ctrl.pagination.totalPages, 'categoria/' + ctrl.category.id + '/pagina/' + ctrl.pagination.totalPages)">Fine</a>
              <a class="visible-sm visible-xs" ng-click="ctrl.locateToPage(ctrl.pagination.totalPages, ctrl.pagination.totalPages, 'categoria/' + ctrl.category.id + '/pagina/' + ctrl.pagination.totalPages)"><i class="fa fa-fast-forward" aria-hidden="true"></i></a>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="row" ng-if="ctrl.category.oldEvents.length <= 0">
      <div class="col-md-10 col-md-offset-1 col-xs-12">
        <div class="jumbotron">
          <h3 class="text-center"><strong>Non sono presenti Eventi Trascortsi nella Categoria {{ctrl.category.name}}</strong></h3>
        </div>
      </div>
    </div>

    <div class="row br-lg"></div>
  </div>
</div>
